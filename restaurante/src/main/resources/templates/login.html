<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Iniciar sesión - Restaurante</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body class="centered">

  <div class="card animate-pop">
    <h2>Iniciar sesión</h2>

    <form th:action="@{/login}" method="post" autocomplete="off" id="login-form">

      <label>Usuario</label>
      <input type="text" name="username" required autocomplete="off"/>

      <label>Contraseña</label>

      <!-- Contenedor del input con ícono -->
      <div style="position:relative; display:flex; align-items:center;">
        <input
          type="password"
          name="password"
          id="password-field"
          required
          autocomplete="new-password"
          style="padding-right:2.5rem; width:100%; box-sizing:border-box;"
        />

        <!-- Botón del ojo -->
        <button
          type="button"
          id="toggle-pass"
          aria-label="Mostrar contraseña"
          aria-pressed="false"
          style="
            position:absolute;
            right:0.35rem;
            background:none;
            border:none;
            cursor:pointer;
            height:1.9rem;
            width:2rem;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:0;
          "
        >
          <!-- Ícono: ojo abierto -->
          <svg id="eye-open" xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
            <path d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
            <circle cx="12" cy="12" r="2.5"/>
          </svg>

          <!-- Ícono: ojo cerrado (oculto al inicio) -->
          <svg id="eye-closed" xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 24 24" width="18" height="18"
               fill="currentColor" style="display:none;">
            <path d="M12 6a9.77 9.77 0 0 1 7.7 3.5l1.6-1.2C19.3 5.1 15 3 12 3 7 3 2.73 6.11 1 10c1.06 2.39 2.86 4.3 5.2 5.58L3 19l1.4 1.4 17-17L20 2l-3 3 .1.1A9.77 9.77 0 0 1 12 6zM12 18c-2.76 0-5-2.24-5-5 0-.58.11-1.13.31-1.63L9 13.37A3 3 0 0 0 15 9.63l1.5-1.5C18.09 9.28 19.06 11.4 19.78 13.5 18.25 16.18 15.36 18 12 18z"/>
          </svg>
        </button>
      </div>

      <button type="submit" class="btn">Entrar</button>
    </form>

    <div class="links">
      <a th:href="@{/register}">Registrarse</a> |
      <a th:href="@{/olvide}">Olvidé mi contraseña</a>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Limpia campos al cargar
    document.querySelectorAll("input").forEach(i => i.value = "");

    // Mostrar/Ocultar contraseña
    const passwordField = document.getElementById('password-field');
    const toggleBtn = document.getElementById('toggle-pass');
    const eyeOpen = document.getElementById('eye-open');
    const eyeClosed = document.getElementById('eye-closed');

    toggleBtn.addEventListener('click', () => {
      const isPassword = passwordField.type === "password";

      passwordField.type = isPassword ? "text" : "password";
      toggleBtn.setAttribute("aria-pressed", isPassword ? "true" : "false");
      toggleBtn.setAttribute(
        "aria-label",
        isPassword ? "Ocultar contraseña" : "Mostrar contraseña"
      );

      // Alternar iconos
      eyeOpen.style.display = isPassword ? "none" : "inline";
      eyeClosed.style.display = isPassword ? "inline" : "none";
    });
  </script>

  <script th:src="@{/js/app.js}"></script>

</body>
</html>
